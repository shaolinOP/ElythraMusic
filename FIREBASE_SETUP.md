# Firebase Setup Guide for Elythra Music

This guide will help you set up Firebase Authentication with Google Sign-In for Elythra Music.

## Prerequisites

- Flutter SDK installed
- Android Studio or VS Code with Flutter extensions
- A Google account

## Step 1: Create Firebase Project

1. Go to the [Firebase Console](https://console.firebase.google.com/)
2. Click "Create a project" or "Add project"
3. Enter project name: `Elythra Music`
4. Choose whether to enable Google Analytics (recommended)
5. Click "Create project"

## Step 2: Add Android App to Firebase

1. In your Firebase project, click "Add app" and select Android
2. Enter the following details:
   - **Android package name**: `com.elythra.music`
   - **App nickname**: `Elythra Music Android`
   - **Debug signing certificate SHA-1**: (Get this from your development environment)

### Getting SHA-1 Certificate

Run this command in your project root:

```bash
cd android
./gradlew signingReport
```

Look for the SHA-1 under "Variant: debug" and copy it.

## Step 3: Download Configuration File

1. Download the `google-services.json` file
2. Place it in `android/app/` directory
3. **Important**: Replace the template file `android/app/google-services.json.template`

## Step 4: Enable Authentication

1. In Firebase Console, go to "Authentication" → "Sign-in method"
2. Enable "Google" sign-in provider
3. Set the project support email
4. Save the configuration

## Step 5: Update Firebase Options

1. Install FlutterFire CLI:
```bash
dart pub global activate flutterfire_cli
```

2. Configure FlutterFire:
```bash
flutterfire configure
```

3. Select your Firebase project: `Elythra Music`
4. Select platforms: Android (and others if needed)
5. This will generate/update `lib/core/firebase/firebase_options.dart`

## Step 6: Test the Setup

1. Run the app:
```bash
flutter run
```

2. Navigate to the authentication screen
3. Try signing in with Google
4. Check Firebase Console → Authentication → Users to see if the user was created

## Troubleshooting

### Common Issues

1. **SHA-1 Certificate Mismatch**
   - Make sure the SHA-1 in Firebase matches your development certificate
   - For release builds, add the release SHA-1 as well

2. **Google Sign-In Fails**
   - Verify the package name matches exactly: `com.elythra.music`
   - Check that Google Sign-In is enabled in Firebase Console
   - Ensure `google-services.json` is in the correct location

3. **Build Errors**
   - Run `flutter clean && flutter pub get`
   - Check that all Gradle configurations are correct

### Debug Commands

```bash
# Clean and rebuild
flutter clean
flutter pub get

# Check package name
grep applicationId android/app/build.gradle

# Verify Firebase configuration
flutter packages get
```

## File Structure

After setup, your project should have:

```
android/
├── app/
│   ├── google-services.json          # ✅ Downloaded from Firebase
│   └── build.gradle                  # ✅ Updated with Firebase plugins
├── build.gradle                      # ✅ Updated with Firebase classpath
lib/
├── core/
│   └── firebase/
│       ├── firebase_options.dart     # ✅ Generated by FlutterFire CLI
│       └── firebase_service.dart     # ✅ Already created
└── features/
    └── auth/
        ├── auth_cubit.dart           # ✅ Already configured
        ├── auth_screen.dart          # ✅ Already configured
        └── auth_state.dart           # ✅ Already configured
```

## Security Notes

- Never commit `google-services.json` to public repositories
- Add `android/app/google-services.json` to your `.gitignore`
- Use environment variables for sensitive configuration in production

## Next Steps

Once Firebase is set up:

1. Test authentication flow
2. Implement user profile features
3. Add playlist synchronization
4. Set up analytics (optional)

For additional help, refer to:
- [Firebase Documentation](https://firebase.google.com/docs)
- [FlutterFire Documentation](https://firebase.flutter.dev/)